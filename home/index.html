<!doctype html>
<html lang="en">
    <head>
	    <title>Strava Activity Data Service</title>
	
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
		<meta name="author" content="Martin Keys">
		<meta name="description" content="Strava Activity Data Service" /> 
		<meta property="og:title" content="Strava Activity Data Service"/>  
		<meta property="og:description" content="Strava activity data service... view and download"/>  
		<meta property="og:image" content="img/ci_sols_logo.png"/>  
		<link rel="icon" type="image/png" href="img/ci_sols_logo.png"/>
		
		<link rel="stylesheet" href="css/bootstrap.min.css">
    </head>
	<body>
	    <style>
		    table{
		        overflow:auto;
		        display:inline-block;
		    }
		    tbody,thead,tr,th {
		        direction:ltr ;
		    }
			tr {
		        direction:ltr ;
			    white-space: nowrap;
			}    
	    </style>

		<script defer src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
		<script src="https://apis.google.com/js/platform.js" async defer></script>
	
		<script src="js/angular.min.js"></script>
		<script src="js/jquery-3.2.1.slim.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.min.js"></script>

		<script src="js/moment.js"></script>
		<script src="js/moment-timezone.js"></script>

		<div class="container" ng-app="app">
			<div ng-controller="appCtrl">
				<div class="col-md-12">
					<div class="wsite-spacer" style="height:10px;"></div>
					<a href="https://www.conceptintegral.com"><img class="img-fluid" src="img/concept_integral_logo.png"></a>
					<div class="wsite-spacer" style="height:10px;"></div>
					<center><i><span class="text-muted">In 1975, <a href="https://en.wikipedia.org/wiki/Fred_Brooks">FredBrooks</a> said: I will contend that conceptual integrity is the most important consideration in system design. It is better to have a system omit certain anomalous features and improvements, but to reflect one set of design ideas, than to have one that contains many good but independent and uncoordinated ideas.</span></i></center>
				</div>
	
				<hr class="featurette-divider"/>		
	
				<div class="col-md-12">
					<h3 class="featurette-heading">Strava activity data service<span class="text-muted"> view and download</h3></span>			
				</div>

				<div class="wsite-spacer" style="height:10px;"></div>

				<div class="col-md-12">
					<div class="card">
  						<div class="card-body">
							<h5>Have you authorised access to your Strava data?</h5>
							<a href="https://www.strava.com/oauth/authorize?scope=read,activity:read,activity:read_all&client_id=15730&response_type=code&redirect_uri=https://api.strava.conceptintegral.com:8443/service/register/connect"><img class="featurette-image pull-left" src="img/btn_strava_connectwith_orange.png"></a>
							<div class="wsite-spacer" style="height:10px;"></div>
							<div class="form-group">
								<input id="req_athlete" class="form-control form-control-danger" ng-model="req_athlete" ng-change="upd_req()" placeholder="Strava athlete id (re-connect to Strava if you don't know this)" required/>
							</div>
							<div class="form-check">
								<div class="form-check form-check-inline">
									<label class="form-check-label">
										<input class="form-check-input" type="radio" ng-model="req_std" name="req_std" value="metric" ng-click="upd_req()"> Metric</input>
									</label>
								</div>				
								<div class="form-check form-check-inline">
									<label class="form-check-label">
										<input class="form-check-input" type="radio" ng-model="req_std" name="req_std" value="imperial" ng-click="upd_req()"> Imperial</input>
									</label>
								</div>				
							</div>				
							<!--div class="form-group" >
								<i><span class="text-muted">
					  			NOTE: On initial access, the request may fail and/or some activity fields may be missing (e.g. calories and location) due to Strava and Google Maps data rate limitations.
				  				</span></i>
						  	</div-->
					  	</div>
				  	</div>
	
					<div class="wsite-spacer" style="height:10px;"></div>
		
					<div class="row">
						<div class="col-md-4">
							<div class="card">
		  						<div class="card-body">
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="ride""> Ride</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="run""> Run</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="hike""> Walk</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="ski""> Ski</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="swim"> Swim</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act" name="req_act" value="workout"> Workout</input>
											</label>
										</div>
									</div>				
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act2" name="req_act2" value="all" ng-change="upd_req()"> All</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_act2" name="req_act2" value="com" ng-change="upd_req()"> Commute Only</input>
											</label>
										</div>
									</div>
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_act_com" name="req_act_com" ng-change="upd_req()"> Commute</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_act_man" name="req_act_man" ng-change="upd_req()"> Manual</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_act_train" name="req_act_train" ng-change="upd_req()"> On Trainer</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_act_flag" name="req_act_flag" ng-change="upd_req()"> Flagged</input>
											</label>
										</div>				
									</div>
									<div class="form-group">
										<input id="req_filter" class="form-control" ng-model="req_search" ng-change="upd_req()" placeholder="Activity name word search"/>
									</div>
									<div class="form-group">
										<button type="button" class="btn btn-primary" ng-click="view_act()">View Activities</button>
								  	</div>
							  	</div>
						  	</div>
					  	</div>
						<div class="col-md-4">
							<div class="card">
		  						<div class="card-body">
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="all"> All</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="ride"> Ride</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="run"> Run</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="hike"> Walk</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="ski"> Ski</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="swim"> Swim</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum" name="req_sum" value="workout"> Workout</input>
											</label>
										</div>
									</div>				
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum2" name="req_sum2" value="all" ng-change="upd_req()"> All</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum2" name="req_sum2" value="com" ng-change="upd_req()"> Commute Only</input>
											</label>
										</div>
									</div>
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_sum_com" name="req_sum_com" ng-change="upd_req()"> Commute</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_sum_man" name="req_sum_man" ng-change="upd_req()"> Manual</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_sum_train" name="req_sum_train" ng-change="upd_req()"> On Trainer</input>
											</label>
										</div>				
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_sum_flag" name="req_sum_flag" ng-change="upd_req()"> Flagged</input>
											</label>
										</div>				
									</div>
									<div class="form-check">
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum_type" name="req_sum_type" value="all" ng-click="upd_req()"> All</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="radio" ng-model="req_sum_type" name="req_sum_type" value="recent" ng-click="upd_req()"> Recent Only</input>
											</label>
										</div>
										<div class="form-check form-check-inline">
											<label class="form-check-label">
												<input class="form-check-input" type="checkbox" ng-model="req_sum_typemnth" name="req_sum_typemnth" ng-click="upd_req()"> Include Monthly</input>
											</label>
										</div>
									</div>				
									<div class="form-group">
										<button type="button" class="btn btn-primary" ng-click="view_sum()">View Analysis</button>
								  	</div>
							  	</div>
						  	</div>
					  	</div>
						<div class="col-md-4">
							<div class="card">
								<div class="card-body">
									<div class="form-group">
										<b>CSV download: </b><a href="{{req_csv_url}}" target="_blank">{{req_csv_url}}</a>
									</div>
									<div class="form-group">
										<button type="button" class="btn btn-primary" ng-click="preview()">Preview Data (JSON)</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="wsite-spacer" style="height:10px;"></div>

				<div id="results" class="col-md-12">
					<div ng-if="loading">
						<center>
							<img class="img-responsive" src="img/loading_bar.gif"/>
						</center>
					</div>
	 	 			<div ng-if="preview_data!=''">
						<pre>{{preview_data}}</pre>
	 	 			</div>
	 	 			<div ng-if="resp_err!=''" >
		  				<div class="text-danger"><b>{{resp_err_type}} </b>{{resp_err}}</div>
	 	 			</div>
	 	 			<div ng-if="resp_info!=''" >
		  				<div class="text-info">{{resp_info}}</div>
	 	 			</div>
	 	 			<div ng-if="view_data_activities.run.length>0 && req_act=='run'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Start Town</th> 
										<th style="text-align: center">Start City</th>
										<th style="text-align: center">Start Country</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Finish Town</th> 
										<th style="text-align: center">Finish City</th>
										<th style="text-align: center">Finish Country</th>
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Pace</th>
										<th style="text-align: center">Max Pace</th>
										<th style="text-align: center">Avg Cadence</th>
										<th style="text-align: center">Min Elevation</th>
										<th style="text-align: center">Max Elevation</th> 
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Shoe</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">Commute</th>
										<th style="text-align: center">On Trainer</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.run | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Run</td>
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{r["start-town"]}}</td> 
										<td>{{r["start-city"]}}</td>
										<td>{{r["start-country"]}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td>{{r["finish-town"]}}</td> 
										<td>{{r["finish-city"]}}</td>
										<td>{{r["finish-country"]}}</td>
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["avg-pace"])}}</td>
										<td ng-if="r['max-pace']" style="text-align: right">{{get_duration_display(r["max-pace"])}}</td>
										<td ng-if="!r['max-pace']" style="text-align: right"></td>
										<td style="text-align: right">{{get_number_display(r["avg-cadence"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["min-elevation"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-elevation"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td>{{get_shoe_display(r.shoe.brand,r.shoe.model)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-commute"])}}</td> 
										<td>{{get_boolean_display(r["is-on-trainer"])}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
					<div ng-if="view_data_activities.ride.length>0 && req_act=='ride'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Start Town</th> 
										<th style="text-align: center">Start City</th>
										<th style="text-align: center">Start Country</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Finish Town</th> 
										<th style="text-align: center">Finish City</th>
										<th style="text-align: center">Finish Country</th>
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Max Speed</th>
										<th style="text-align: center">Avg Cadence</th>
										<th style="text-align: center">Min Elevation</th>
										<th style="text-align: center">Max Elevation</th> 
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Kilojoules</th>
										<th style="text-align: center">Avg Watts</th>
										<th style="text-align: center">Max Watts</th>
										<th style="text-align: center">Weighted Avg Watts</th>
										<th style="text-align: center">Bike</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">Commute</th>
										<th style="text-align: center">On Trainer</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.ride | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Ride</td>
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{r["start-town"]}}</td> 
										<td>{{r["start-city"]}}</td>
										<td>{{r["start-country"]}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td>{{r["finish-town"]}}</td> 
										<td>{{r["finish-city"]}}</td>
										<td>{{r["finish-country"]}}</td>
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-cadence"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["min-elevation"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-elevation"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r.kilojoules,0)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-watts"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-watts"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["weighted-avg-watts"],0)}}</td>
										<td>{{get_bike_display(r.bike.name)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-commute"])}}</td> 
										<td>{{get_boolean_display(r["is-on-trainer"])}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
					<div ng-if="view_data_activities.hike.length>0 && req_act=='hike'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Start Town</th> 
										<th style="text-align: center">Start City</th>
										<th style="text-align: center">Start Country</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Finish Town</th> 
										<th style="text-align: center">Finish City</th>
										<th style="text-align: center">Finish Country</th>
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Pace</th>
										<th style="text-align: center">Max Pace</th>
										<th style="text-align: center">Min Elevation</th>
										<th style="text-align: center">Max Elevation</th> 
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Shoe</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">Commute</th>
										<th style="text-align: center">On Trainer</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.hike | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Walk</td>
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{r["start-town"]}}</td> 
										<td>{{r["start-city"]}}</td>
										<td>{{r["start-country"]}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td>{{r["finish-town"]}}</td> 
										<td>{{r["finish-city"]}}</td>
										<td>{{r["finish-country"]}}</td>
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["avg-pace"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["max-pace"])}}</td>
										<td style="text-align: right">{{get_number_display(r["min-elevation"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-elevation"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td>{{get_shoe_display(r.shoe.brand,r.shoe.model)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-commute"])}}</td> 
										<td>{{get_boolean_display(r["is-on-trainer"])}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>					
						</div>
					</div>
					<div ng-if="view_data_activities.ski.length>0 && req_act=='ski'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Start Town</th> 
										<th style="text-align: center">Start City</th>
										<th style="text-align: center">Start Country</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Finish Town</th> 
										<th style="text-align: center">Finish City</th>
										<th style="text-align: center">Finish Country</th>
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Max Speed</th>
										<th style="text-align: center">Min Elevation</th>
										<th style="text-align: center">Max Elevation</th> 
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.ski | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Ski</td>
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{r["start-town"]}}</td> 
										<td>{{r["start-city"]}}</td>
										<td>{{r["start-country"]}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td>{{r["finish-town"]}}</td> 
										<td>{{r["finish-city"]}}</td>
										<td>{{r["finish-country"]}}</td>
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["min-elevation"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-elevation"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td>{{get_bike_display(r.bike.name)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>
						</div>
					</div>		
					<div ng-if="view_data_activities.swim.length>0 && req_act=='swim'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Max Speed</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.swim | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Swim</td>
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["max-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
					<div ng-if="view_data_activities.workout.length>0 && req_act=='workout'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">id</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">On Trainer</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Start Time</th>
										<th style="text-align: center">Finish Time</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Avg Heart Rate</th> 
										<th style="text-align: center">Max Heart Rate</th> 
										<th style="text-align: center">Avg Temp</th> 
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Device</th>
										<th style="text-align: center">On Trainer</th>
										<th style="text-align: center">Manual</th>
										<th style="text-align: center">Flagged</th>
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_activities.workout | orderBy: ['\u0022start-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td><a href="https://www.strava.com/activities/{{r.id}}" target="_blank">{{r.id}}</a></td>
										<td>{{r.athlete.name}}</td> 
										<td>Workout</td>
										<td>{{get_boolean_display(r["is-on-trainer"])}}</td> 
										<td>{{get_desc_display(r.description)}}</td> 
										<td>{{get_date_time_display(r["start-time"])}}</td>
										<td>{{get_date_time_display(r["finish-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["max-heart-rate"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-temp"],1)}}</td> 
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td>{{r["device-name"]}}</td> 
										<td>{{get_boolean_display(r["is-on-trainer"])}}</td> 
										<td>{{get_boolean_display(r["is-manual"])}}</td> 
										<td>{{get_boolean_display(r["is-flagged"])}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
	 	 			<div ng-if="view_data_analytics.all.length>0 && req_sum=='all'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Active Days</th> 
										<th style="text-align: center">Activities</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Elevation Gain</th>
										<th style="text-align: center">Avg Calories</th>
										<th style="text-align: center">Avg Suffer Score</th>
										
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th> 
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.all | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>All</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
	 	 			<div ng-if="view_data_analytics.run.length>0 && req_sum=='run'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Run Days</th> 
										<th style="text-align: center">Runs</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Pace</th>
										<th style="text-align: center">Avg Cadence</th>
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Elevation Gain</th>
										<th style="text-align: center">Avg Calories</th>
										<th style="text-align: center">Avg Suffer Score</th>
										
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th> 
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.run | orderBy: ['\u0022period-begin-time\u0022','\u0022period-end-time\u0022',]:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Run</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_duration_display(r["avg-pace"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-cadence"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
					<div ng-if="view_data_analytics.ride.length>0 && req_sum=='ride'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Ride Days</th> 
										<th style="text-align: center">Rides</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
										<th style="text-align: center">Kilojoules</th>
	
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Avg Cadence</th>
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Elevation Gain</th>
										<th style="text-align: center">Avg Calories</th> 
										<th style="text-align: center">Avg Suffer Score</th> 
										<th style="text-align: center">Avg Avg Watts</th>
										<th style="text-align: center">Avg Weighted Avg Watts</th>
	
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th> 
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>	 
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.ride | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Ride</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r.kilojoules,0)}}</td>
	
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-cadence"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["avg-watts-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["weighted-avg-watts-per-activity"],0)}}</td>
										
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div ng-if="view_data_analytics.hike.length>0 && req_sum=='hike'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Walk Days</th> 
										<th style="text-align: center">Walks</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Pace</th>
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Elevation Gain</th>
										<th style="text-align: center">Avg Calories</th> 
										<th style="text-align: center">Avg Suffer Score</th> 
	
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th> 
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.hike | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Walk</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_duration_display(r["avg-pace"])}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>					
						</div>
					</div>
					<div ng-if="view_data_analytics.ski.length>0 && req_sum=='ski'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Ski Days</th> 
										<th style="text-align: center">Skis</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Elevation Gain</th>
										<th style="text-align: center">Avg Gradient</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Elevation Gain</th>
										<th style="text-align: center">Avg Calories</th> 
										<th style="text-align: center">Avg Suffer Score</th> 
	
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th> 
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.ski | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Ski</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain"],0)}}</td>
										<td style="text-align: right">{{get_percent_display(r["avg-gradient"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["elevation-gain-per-activity"],0)}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>		
					</div>
					<div ng-if="view_data_analytics.swim.length>0 && req_sum=='swim'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Swim Days</th> 
										<th style="text-align: center">Swims</th> 
	
										<th style="text-align: center">Distance</th>
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Speed</th>
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Distance</th>
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Calories</th> 
										<th style="text-align: center">Avg Suffer Score</th> 
	
										<th style="text-align: center">Avg Daily Distance</th> 
										<th style="text-align: center">Avg Daily Elapsed Time</th>
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.swim | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Swim</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.distance,2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_number_display(r["avg-speed"],2)}}</td>
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-activity"],2)}}</td>
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_number_display(r["distance-per-day"],2)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>		
					</div>
					<div ng-if="view_data_analytics.workout.length>0 && req_sum=='workout'" >
						<div class="table-responsive">          
					  		<table class="table table-hover">
								<thead class="thead-default">
									<tr>
										<th style="text-align: center">#</th>
										<th style="text-align: center">Name</th>
										<th style="text-align: center">Type</th>
										<th style="text-align: center">Description</th> 
										<th style="text-align: center">Days</th> 
										<th style="text-align: center">Workout Days</th> 
										<th style="text-align: center">Workouts</th> 
	
										<th style="text-align: center">Elapsed Time</th>
										<th style="text-align: center">Moving Time</th>
										<th style="text-align: center">Calories</th> 
										<th style="text-align: center">Suffer Score</th>
	
										<th style="text-align: center">Avg Heart Rate</th> 
	
										<th style="text-align: center">Avg Elapsed Time</th>
										<th style="text-align: center">Avg Moving Time</th>
										<th style="text-align: center">Avg Calories</th> 
										<th style="text-align: center">Avg Suffer Score</th> 
	
										<th style="text-align: center">Avg Daily Elapsed Time</th>
										<th style="text-align: center">Avg Daily Moving Time</th> 
										<th style="text-align: center">Avg Daily Calories</th> 
										<th style="text-align: center">Avg Daily Suffer Score</th> 
									</tr>
								</thead>
								<tbody ng:repeat="r in sorted_data = (view_data_analytics.workout | orderBy: ['\u0022period-end-time\u0022']:true)">
									<tr>
										<td>{{$index+1}}</td>
										<td>{{r.athlete.name}}</td> 
										<td>Workout</td>
										<td>{{get_period_display(r.period)}}</td> 
										<td style="text-align: right">{{get_number_display(r["days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["activity-days"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r.count,0)}}</td> 
										<td style="text-align: right">{{get_duration_display(r["elapsed-time"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time"])}}</td>
										<td style="text-align: right">{{get_number_display(r.calories,0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score"],0)}}</td>
	
										<td style="text-align: right">{{get_number_display(r["avg-heart-rate"],0)}}</td> 
	
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-activity"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-activity"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-activity"],0)}}</td> 
	
										<td style="text-align: right">{{get_duration_display(r["elapsed-time-per-day"])}}</td>
										<td style="text-align: right">{{get_duration_display(r["moving-time-per-day"])}}</td>
										<td style="text-align: right">{{get_number_display(r["calories-per-day"],0)}}</td> 
										<td style="text-align: right">{{get_number_display(r["suffer-score-per-day"],0)}}</td> 
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>

			<hr class="featurette-divider">
	
			<footer class="container">
				<p class="float-right"><a href="mailto:hello@conceptintegral.com">hello@conceptintegral.com</a></p>
				<p>&copy; 2021 <a href="https://www.conceptintegral.com">Concept Integral</a></p>
			</footer>
		</div>
	
		<script>
			var app = angular.module('app', []);
			app.controller('appCtrl', function($scope, $http, $location, $window) 
			{
				$scope.resp_err = '';
				$scope.resp_err_type = 'ERROR';
				$scope.resp_info = '';
				$scope.req_csv_url = ''
				$scope.req_preview_url = ''
				$scope.req_view_analytics_url = ''
				$scope.req_view_activities_url = ''
				$scope.preview_data = '';
				$scope.view_data_activities = '';
				$scope.view_data_analytics = '';
				$scope.loading_preview = false;
				$scope.loading_preview = false;
				$scope.loading = false;
				$scope.req_std = 'metric';
				$scope.req_sum_type = 'recent';
				$scope.req_sum_typemnth = false;
				$scope.req_sum = 'all';
				$scope.req_sum2 = 'all';
				$scope.req_act = 'ride';
				$scope.req_act2 = 'all';
				$scope.req_act_com = true;
				$scope.req_act_train = true;
				$scope.req_act_man = true;
				$scope.req_act_flag = false;
				$scope.req_sum_all = true;
				$scope.req_sum_com = true;
				$scope.req_sum_train = true;
				$scope.req_sum_man = true;
				$scope.req_sum_flag = false;
				$scope.req_athlete = '';
				$scope.req_search = '';
				
				$scope.upd_req = function()
				{
					if (!$scope.loading)
					{
						if ($scope.req_act2 == 'com')
						{
							$scope.req_act_com = true;
						}
						if ($scope.req_sum2 == 'com')
						{
							$scope.req_sum_com = true;
						}
						$scope.resp_err = '';
						$scope.resp_info = '';
						$scope.preview_data = '';
						$scope.view_data_activities  = '';
						$scope.view_data_analytics = '';
						$scope.req_csv_url = $scope.get_csv_url();
						$scope.req_preview_url = $scope.get_preview_url();
						$scope.req_view_analytics_url = $scope.get_view_analytics_url();
						$scope.req_view_activities_url = $scope.get_view_activities_url();
					}
				}
				$scope.get_preview_url = function()
				{
					var url = ''
					if ($scope.req_athlete != undefined)
					{
						url = 'https://api.strava.conceptintegral.com:8443/service/activity/' + $scope.req_athlete + '?style=pretty&units=' + $scope.req_std
						url = url + '&commute-only=N&commute=Y&trainer=Y&flagged=Y&manual=Y&data=1';
					}
					return url;
				}
				$scope.get_csv_url = function()
				{
					var url = ''
					if ($scope.req_athlete != undefined)
					{
						url = 'https://api.strava.conceptintegral.com:8443/service/activitycsv/' + $scope.req_athlete + '?units=' + $scope.req_std 
					}
					return url;
				}
				$scope.get_view_activities_url = function()
				{
					var url = ''
					if ($scope.req_athlete != undefined)
					{
						url = 'https://api.strava.conceptintegral.com:8443/service/activity/' + $scope.req_athlete + '?units=' + $scope.req_std
						url = url + '&commute-only=' + ($scope.req_act2 == 'com' ? 'Y' : 'N') + '&commute=' + ($scope.req_act_com ? 'Y' : 'N') + '&trainer=' + ($scope.req_act_train ? 'Y' : 'N') + '&flagged=' + ($scope.req_act_flag ? 'Y' : 'N') + '&manual=' + ($scope.req_act_man ? 'Y' : 'N');
						if ($scope.req_search.length > 0)
						{
							url = url + '&search=' + $scope.req_search; 
						}
					}
					return url;
				}
				$scope.get_view_analytics_url = function()
				{
					var url = ''
					if ($scope.req_athlete != undefined)
					{
						url = 'https://api.strava.conceptintegral.com:8443/service/analytics/' + $scope.req_athlete + '?units=' + $scope.req_std
						url = url + '&type=' + $scope.req_sum_type
						if (!$scope.req_sum_typemnth)
						{
							url = url + '_mini'; 
						}
						url = url + '&commute-only=' + ($scope.req_sum2 == 'com' ? 'Y' : 'N') + '&commute=' + ($scope.req_sum_com ? 'Y' : 'N') + '&trainer=' + ($scope.req_sum_train ? 'Y' : 'N') + '&flagged=' + ($scope.req_sum_flag ? 'Y' : 'N') + '&manual=' + ($scope.req_sum_man ? 'Y' : 'N');
					}
					return url;
				}
				$scope.preview = function()
				{
					$scope.loading_preview = true;
					$scope.loading = true;
					$scope.resp_err = '';
					$scope.resp_info = '';
					$scope.preview_data = '';
					$scope.view_data_activities  = '';
					$scope.view_data_analytics = '';
					console.log($scope.req_preview_url);
					$http.get($scope.req_preview_url).
						then(function(response)
						{
							$scope.preview_data = JSON.stringify(response.data, undefined, 2);
							$scope.loading_preview = false;
							$scope.loading = false;
						}, 
						function(response) 
						{
							console.log(response)
							$scope.get_error_display(response)
							$scope.loading_preview = false;
							$scope.loading = false;
						});
				}
				$scope.view_sum = function()
				{
					$scope.loading_view = true;
					$scope.loading = true;
					$scope.resp_err = '';
					$scope.resp_info = '';
					$scope.preview_data = '';
					$scope.view_data_analytics = '';
					$scope.view_data_activities  = '';
					console.log($scope.req_view_analytics_url);
					$http.get($scope.req_view_analytics_url).
						then(function(response)
						{
							$scope.view_data_analytics = response.data;
							$scope.loading_view = false;
							$scope.loading = false;
						}, 
						function(response) 
						{
							console.log(response)
							$scope.get_error_display(response)
							$scope.loading_view = false;
							$scope.loading = false;
						});
				}
				$scope.view_act = function()
				{
					$scope.loading_view = true;
					$scope.loading = true;
					$scope.resp_err = '';
					$scope.resp_info = '';
					$scope.preview_data = '';
					$scope.view_data_analytics = '';
					$scope.view_data_activities  = '';
					console.log($scope.req_view_activities_url);
					$http.get($scope.req_view_activities_url).
						then(function(response)
						{
							$scope.view_data_activities = response.data;
							if (response.data.run != undefined)
							{
								console.log('run=' + response.data.run.length);
							}
							if (response.data.ride != undefined)
							{
								console.log('ride=' + response.data.ride.length);
							}
							if (response.data.hike != undefined)
							{
								console.log('hike=' + response.data.hike.length);
							}
							if (response.data.swim != undefined)
							{
								console.log('swim=' + response.data.swim.length);
							}
							if (response.data.workout != undefined)
							{
								console.log('workout=' + response.data.workout.length);
							}
							if (response.data.ski != undefined)
							{
								console.log('ski=' + response.data.ski.length);
							}
							$scope.loading_view = false;
							$scope.loading = false;
						}, 
						function(response) 
						{
							console.log(response)
							$scope.get_error_display(response)
							$scope.loading_view = false;
							$scope.loading = false;
						});
				}
				$scope.get_error_display = function(error)
				{
					if (error.status == 401)
					{
						$scope.resp_err_type = "OOPS!";
						$scope.resp_err = "Strava access is not authorised... please connect (hit the big orange button at the top of the page)";
					}
					else if (error.status == 413)
					{
						$scope.resp_err_type = "OOPS!";
						$scope.resp_err = "Strava data rate limit has been exceeded (arrhhh!)... please try again in about 15 mins";
					}
					else
					{
						$scope.resp_err_type = "ERROR!";
						$scope.resp_err = (error.statusText == '' ? 'Unknown' : error.statusText) + " [" + error.status + "]";
					}
				}
				$scope.get_desc_display = function(desc)
				{
					if (desc.length > 80)
					{
						return desc.substring(0,80) + "...";
					}
					else
					{
						return desc;
					}
				}
				$scope.get_shoe_display = function(brand,model)
				{
					if (brand=='Unknown' && model == 'Unknown')
					{
						return 'Unknown';
					}
					else
					{
						return brand + ' ' + model;
					}
				}
				$scope.get_bike_display = function(name)
				{
					return name;
				}
				$scope.get_tz_date = function(dt)
				{
					var home = new moment(dt)
					var local = home.tz(moment.tz.guess());
					return local
				}	
				$scope.get_date_time_display = function(dt)
				{
					return new moment.parseZone(dt).format("ddd D-MMM-YYYY HH:mm Z")
				}
				$scope.get_duration_display = function(tm)
				{
					return tm;
				}
				$scope.get_number_display = function(num, dp)
				{
					if (num == null)
					{
						return "";
					}
					else
					{	
						return num.toFixed(dp).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
					}
				}
				$scope.get_boolean_display = function(bln)
				{
					if (bln)
					{
						return "Yes";
					}
					else
					{
						return "No";
					}
				}
				$scope.get_percent_display = function(num, dp)
				{
					if (num == null)
					{
						return "";
					}
					else
					{	
						num2 = num * 100;
						return num2.toFixed(dp).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
					}
				}
				$scope.summary_comparator = function(sum1, sum2)
				{
					var st1 = new moment(sum1['period-begin-time'])
					var st2 = new moment(sum2['period-begin-time'])
					var end1 = new moment(sum1['period-end-time'])
					var end2 = new moment(sum2['period-end-time'])
					if (end1 < end2)
					{
						return -1;
					}
					else if (end1 > end2)
					{
						return 1;
					}
					else
					{
						if (st1 < st2)
						{
							return -1;
						}
						else if (st1 > st2)
						{
							return 1;
						}
					}
				}
				$scope.get_period_display = function(period)
				{
					if (period == "ALL")
					{
						return "All";
					}
					else if (period.indexOf("DAYS") > -1)
					{
						return " Last " + period.substring(5,period.length-5) + " days";
					}
					else if (period.indexOf("LAST_") > -1)
					{
						if (period.indexOf("YEARS") > -1)
						{
							return "Last " + period.substring(5,6) + " years";
						}
						else
						{
							return "Last year";
						}
					}
					else if (period.length == 8)
					{
						return period.substring(0,4) + " to date";
					}
					else if (period.length == 6)
					{
						var mlist = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
						return mlist[parseInt(period.substring(4,6))-1] + '-' + period.substring(0,4);
					}
					else 
					{
						return period;
					}
				}
				$scope.set_athlete = function(ath)
				{
					$scope.req_athlete = ath
				}
				$scope.set_athlete(window.location.search.substr(1).split('=')[1]);
				$scope.upd_req();
			});
		</script>
	</body>
</html>